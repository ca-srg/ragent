# AWS Configuration
AWS_REGION=ap-northeast-1
AWS_ACCESS_KEY_ID=your_access_key_id
AWS_SECRET_ACCESS_KEY=your_secret_access_key

# S3 Vector Configuration
S3_VECTOR_INDEX_NAME=mdrag-vectors
S3_BUCKET_NAME=your-s3-bucket

# OpenSearch Configuration (for Hybrid RAG)
OPENSEARCH_ENDPOINT=https://your-opensearch-domain.region.es.amazonaws.com
OPENSEARCH_USERNAME=admin
OPENSEARCH_PASSWORD=your_password

# Filter Configuration
EXCLUDE_CATEGORIES=個人メモ,日報

# Slack Bot Configuration
SLACK_BOT_TOKEN=xoxb-your-bot-token
SLACK_USER_TOKEN=xoxp-your-user-token-with-search-scope
SLACK_APP_TOKEN=xapp-your-app-token

# Slack Search Configuration
SLACK_SEARCH_ENABLED=false                     # Enable Slack conversation search pipeline
SLACK_SEARCH_MAX_RESULTS=20                    # Max messages retrieved per query (1-100)
SLACK_SEARCH_MAX_RETRIES=5                     # Slack search retry attempts on transient errors (0-10)
SLACK_SEARCH_CONTEXT_WINDOW_MINUTES=30         # Timeline window for surrounding messages
SLACK_SEARCH_MAX_ITERATIONS=5                  # Max refinement iterations when information insufficient
SLACK_SEARCH_MAX_CONTEXT_MESSAGES=100          # Max messages collected for contextual enrichment
SLACK_SEARCH_TIMEOUT_SECONDS=5                 # Timeout per Slack API request in seconds (1-60)

# MCP Server Configuration
# Host and port for MCP server (JSON-RPC over HTTP)
MCP_SERVER_HOST=localhost
MCP_SERVER_PORT=8080

# MCP tool naming configuration
MCP_TOOL_NAME=hybrid_search              # Base tool name (default: hybrid_search)
MCP_TOOL_PREFIX=ragent-                  # Tool name prefix (final: ragent-hybrid_search)

# IP Authentication (IMPORTANT: Enable for production security)
MCP_IP_AUTH_ENABLED=true                 # Enable IP-based access control
MCP_ALLOWED_IPS=127.0.0.1,::1,192.168.1.0/24  # Comma-separated allowed IP addresses/ranges
MCP_IP_AUTH_ENABLE_LOGGING=true         # Log IP authentication attempts

# MCP Search Defaults
MCP_DEFAULT_SEARCH_SIZE=10               # Default number of search results (1-50)
MCP_DEFAULT_BM25_WEIGHT=0.5              # Default BM25 weight for hybrid search (0-1)
MCP_DEFAULT_VECTOR_WEIGHT=0.5            # Default vector weight for hybrid search (0-1)
MCP_DEFAULT_USE_JAPANESE_NLP=true        # Enable Japanese NLP optimization by default
MCP_DEFAULT_TIMEOUT_SECONDS=30           # Default search timeout in seconds

# MCP Server Performance Settings
MCP_SERVER_READ_TIMEOUT=30s              # HTTP read timeout
MCP_SERVER_WRITE_TIMEOUT=30s             # HTTP write timeout  
MCP_SERVER_IDLE_TIMEOUT=120s             # HTTP idle timeout
MCP_SERVER_MAX_HEADER_BYTES=1048576      # Maximum HTTP header size (1MB)
MCP_SERVER_ENABLE_ACCESS_LOGGING=true    # Enable HTTP access logging
MCP_SERVER_GRACEFUL_SHUTDOWN=true        # Enable graceful shutdown
MCP_SERVER_SHUTDOWN_TIMEOUT=30s          # Graceful shutdown timeout

# OpenTelemetry Configuration (optional)
OTEL_ENABLED=false
OTEL_SERVICE_NAME=ragent
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318
OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf
OTEL_RESOURCE_ATTRIBUTES=service.namespace=ragent,environment=dev
